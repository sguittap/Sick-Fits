{"version":3,"file":"static/webpack/static/development/pages/update.js.2d6cc9a439caaab70591.hot-update.js","sources":["webpack:///./components/UpdateItem.js"],"sourcesContent":["import React, { Component } from 'react';\nimport {Mutation, Query} from 'react-apollo';\nimport Form from './styles/Form';\nimport formatMoney from '../lib/formatMoney';\nimport gql from 'graphql-tag';\nimport Error from './ErrorMessage';\nimport Router from 'next/router';\n\nconst UPDATE_ITEM_MUTATION =  gql`\n    mutation  UPDATE_ITEM_MUTATION($title: String!, $description: String!,$price: Int!){\n        createItem(\n            title: $title\n            description: $description\n            price: $price\n        ) {\n            id\n            title\n            description\n        }\n    }\n`;\n\nconst SINGLE_ITEM_QUERY = gql`\n    query SINGLE_ITEM_QUERY($id: ID!){\n        item(where:{id: $id}){\n            id\n            title\n            description\n            price\n        }\n    }\n`;\n\nclass UpdateItem extends Component {\n    state =  {};\n    \n    handleChange = (e) => {\n        const {name, type, value} = e.target;\n        const val = type === 'number' ? parseFloat(value) : value;\n        this.setState({[name]: val})\n    };\n\n    render() {\n        return (\n            <Query query={SINGLE_ITEM_QUERY} variables={{id: this.props.id}}>\n                {({data, loading}) => {\n                    if(loading) return <p>Loading...</p>;\n                    return (\n                        <Mutation mutation={UPDATE_ITEM_MUTATION} variables={this.state}>\n                            {(createItem, {loading, error})=>(\n                                <Form onSubmit={async e => {\n                                    e.preventDefault();\n                                    const res =  await createItem();\n                                    Router.push({\n                                        pathname:'/item',\n                                        query:{id: res.data.createItem.id},\n                                    })\n                                }}>\n                                    <Error error={error}/>\n                                    <fieldset disabled={loading} aria-busy={loading}>\n                                        <label htmlFor=\"title\">\n                                            Title\n                                            <input \n                                                type=\"text\" \n                                                id=\"title\" \n                                                name=\"title\" \n                                                placeholder=\"Title\" \n                                                required\n                                                defaultValue={data.item.title}\n                                                onChange={this.handleChange}>\n                                            </input>\n                                        </label>\n                                    \n                                        <label htmlFor=\"price\">\n                                            Price\n                                            <input \n                                                type=\"number\" \n                                                id=\"price\" \n                                                name=\"price\" \n                                                placeholder=\"Price\" \n                                                required\n                                                defaultValue={data.item.price}\n                                                onChange={this.handleChange}>\n                                            </input>\n                                        </label>\n                                        \n                                        <label htmlFor=\"description\">\n                                            Description\n                                            <textarea \n                                                id=\"description\" \n                                                name=\"description\" \n                                                placeholder=\"Enter a Description\" \n                                                required\n                                                defaultValue={data.item.description}\n                                                onChange={this.handleChange}>\n                                            </textarea>\n                                        </label>\n                                        <button type=\"submit\">Save Changes</button>\n                                    </fieldset>\n                                </Form>\n                            )}\n                        </Mutation>\n                    )\n                }} \n            </Query>\n        );\n    };\n};\n\nexport default UpdateItem;\nexport {UPDATE_ITEM_MUTATION};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAcA;AACA;AAUA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAhDA;AAsDA;AAGA;;;;AAzEA;AACA;AAyEA;AAEA;;;;;A","sourceRoot":""}