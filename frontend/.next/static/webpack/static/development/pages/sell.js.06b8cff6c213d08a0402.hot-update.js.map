{"version":3,"file":"static/webpack/static/development/pages/sell.js.06b8cff6c213d08a0402.hot-update.js","sources":["webpack:///./components/CreateItem.js"],"sourcesContent":["import React, { Component } from 'react';\nimport {Mutation} from 'react-apollo';\nimport Form from './styles/Form';\nimport formatMoney from '../lib/formatMoney';\nimport gql from 'graphql-tag';\nimport Error from './ErrorMessage';\nimport Router from 'next/router';\n\nconst CREATE_ITEM_MUTATION =  gql`\n    mutation  CREATE_ITEM_MUTATION(\n        $title: String!\n        $description: String!\n        $price: Int!\n        $image: String\n        $largeImage: String\n    ) {\n        createItem(\n            title: $title\n            description: $description\n            price: $price\n            image: $image\n            largeImage: $largeImage\n        ) {\n            id\n        }\n    }\n`;\n\n\nclass CreateItem extends Component {\n    state =  {\n        title:'',\n        description:'',\n        image:'',\n        largeImage:'',\n        price: 0,\n    };\n    \n    handleChange = (e) => {\n        const {name, type, value} = e.target;\n        const val = type === 'number' ? parseFloat(value) : value;\n        this.setState({[name]: val})\n    };\n\n    upLoadFile = async e => {\n        const files = e.target.files;\n        const data = new FormData();\n        data.append('file', files[0]);\n        data.append('upload_preset', 'SickFits');\n        const res = await fetch('https://api.cloudinary.com/v1_1/shaneguittap/image/upload', {\n            method: 'POST',\n            body: data\n        });\n        const file = await res.json();\n        this.setState({\n            image: file.secure_url,\n            largeImage: file.eager[0].secure_url\n        })\n    }\n\n    render() {\n        return (\n            <Mutation mutation={CREATE_ITEM_MUTATION} variables={this.state}>\n                {(createItem, {loading, error})=>(\n                    <Form onSubmit={async e => {\n                        e.preventDefault();\n                        const res =  await createItem();\n                        Router.push({\n                            pathname:'/item',\n                            query:{id: res.data.createItem.id},\n                        })\n                    }}>\n                        <Error error={error}/>\n                        <fieldset disabled={loading} aria-busy={loading}>\n                            <label htmlFor=\"file\">\n                                Image\n                                <input \n                                    type=\"file\" \n                                    id=\"file\" \n                                    name=\"file\" \n                                    placeholder=\"Upload an Image\" \n                                    required\n                                    onChange={this.upLoadFile}>\n                                </input>\n                                {this.state.image && <img src={this.state.image} alt=\"Upload Preview\"/>}\n                            </label>\n                            <label htmlFor=\"title\">\n                                Title\n                                <input \n                                    type=\"text\" \n                                    id=\"title\" \n                                    name=\"title\" \n                                    placeholder=\"Title\" \n                                    required\n                                    value={this.state.title}\n                                    onChange={this.handleChange}>\n                                </input>\n                            </label>\n                        \n                            <label htmlFor=\"price\">\n                                Price\n                                <input \n                                    type=\"number\" \n                                    id=\"price\" \n                                    name=\"price\" \n                                    placeholder=\"Price\" \n                                    required\n                                    value={this.state.price}\n                                    onChange={this.handleChange}>\n                                </input>\n                            </label>\n                            \n                            <label htmlFor=\"description\">\n                                Description\n                                <textarea \n                                    id=\"description\" \n                                    name=\"description\" \n                                    placeholder=\"Enter a Description\" \n                                    required\n                                    value={this.state.description}\n                                    onChange={this.handleChange}>\n                                </textarea>\n                            </label>\n                            <button type=\"submit\">Submit</button>\n                        </fieldset>\n                    </Form>\n                )}\n            </Mutation>\n        )\n    }\n};\n\nexport default CreateItem;\nexport {CREATE_ITEM_MUTATION};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAoBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAMA;AACA;AAFA;AACA;AANA;AAKA;AALA;AAAA;AACA;AADA;AASA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAeA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5DA;AAkEA;;;;AApGA;AACA;AAoGA;AAEA;;;;;A","sourceRoot":""}